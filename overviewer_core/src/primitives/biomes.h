/*
 * This file is part of the Minecraft Overviewer.
 *
 * Minecraft Overviewer is free software: you can redistribute it and/or
 * modify it under the terms of the GNU General Public License as published
 * by the Free Software Foundation, either version 3 of the License, or (at
 * your option) any later version.
 *
 * Minecraft Overviewer is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General
 * Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along
 * with the Overviewer.  If not, see <http://www.gnu.org/licenses/>.
 */

#include <stdint.h>

#define DEFAULT_BIOME 4 /* forest, nice and green */

typedef struct {
    uint16_t idBiome;

    const char* name;

    float temperature;
    float rainfall;

    uint32_t wr, wg, wb; // Force or not ? water Color
    uint32_t fr, fg, fb; // Force Foliage Color
    uint32_t gr, gg, gb; // Force Grass Color
} Biome;

/* each entry in this table is yanked *directly* out of the minecraft source
 * temp/rainfall are taken from what MCP calls setTemperatureRainfall
 *
 * Some biomes, like Swamp, do a bit of post-processing by multiplying on a
 * hard-coded color. The RGB tuple used follows the temp/rainfall.
 * 255, 255, 255 is white, which means do nothing
 * the 3 last int is for water color!
 *
 * keep in mind the x/y coordinate in the color tables is found *after*
 * multiplying rainfall and temperature for the second coordinate, *and* the
 * origin is in the lower-right. <3 biomes.
 */
static Biome biome_table[] = {
    /* 0 */
    {0, "OCEAN", 0.5, 0.5, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {1, "PLAINS", 0.8, 0.4, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {2, "DESERT", 2.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {3, "MOUNTAINS", 0.2, 0.3, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {4, "FOREST", 0.7, 0.8, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    /* 5 */
    {5, "TAIGA", 0.25, 0.8, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {6, "SWAMP", 0.8, 0.9, 97, 123, 100, 106, 112, 57, 106, 112, 57},
    {7, "RIVER", 0.5, 0.5, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {8, "NETHER_WASTES", 2.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {9, "THE_END", 0.5, 0.5, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    /* 10 */
    {10, "FROZEN_OCEAN", 0.0, 0.5, 57, 56, 201, 255, 255, 255, 255, 255, 255},
    {11, "FROZEN_RIVER", 0.0, 0.5, 57, 56, 201, 255, 255, 255, 255, 255, 255},
    {12, "SNOWY_TUNDRA", 0.0, 0.5, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {13, "SNOWY_MOUNTAINS", 0.0, 0.5, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {14, "MUSHROOM_FIELDS", 0.9, 1.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    /* 15 */
    {15, "MUSHROOM_FIELD_SHORE", 0.9, 1.1, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {16, "BEACH", 0.8, 0.4, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {17, "DESERT_HILLS", 2.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {18, "WOODED_HILLS", 0.7, 0.8, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {19, "TAIGA_HILLS", 0.25, 0.8, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    /* 20 */
    {20, "MOUNTAIN_EDGE", 0.2, 0.3, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {21, "JUNGLE", 0.95, 0.9, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {22, "JUNGLE_HILLS", 0.95, 0.9, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {23, "JUNGLE_EDGE", 0.95, 0.9, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {24, "DEEP_OCEAN", 0.5, 0.5, 67, 213, 238, 255, 255, 255, 255, 255, 255},
    /* 25 */
    {25, "STONE_SHORE", 0.2, 0.3, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {26, "SNOWY_BEACH", 0.05, 0.3, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {27, "BIRCH_FOREST", 0.6, 0.6, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {28, "BIRCH_FOREST_HILLS", 0.6, 0.6, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {29, "DARK_FOREST", 0.7, 0.8, 63, 118, 228, 255, 255, 255, 80, 122, 50},
    /* 30 */
    {30, "SNOWY_TAIGA", 0.5, 0.4, 61, 87, 214, 255, 255, 255, 255, 255, 255},
    {31, "SNOWY_TAIGA_HILLS", 0.5, 0.4, 61, 87, 214, 255, 255, 255, 255, 255, 255},
    {32, "GIANT_TREE_TAIGA", 0.3, 0.8, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {33, "GIANT_TREE_TAIGA_HILLS", 0.3, 0.8, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {34, "WOODED_MOUNTAINS", 0.2, 0.3, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    /* 35 */
    {35, "SAVANNA", 1.2, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {36, "SAVANNA_PLATEAU", 1.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {37, "BADLANDS", 2.0, 0.0, 63, 118, 228, 158, 129, 77, 144, 129, 77},
    {38, "WOODED_BADLANDS_PLATEAU", 2.0, 0.0, 63, 118, 228, 158, 129, 77, 144, 129, 77},
    {39, "BADLANDS_PLATEAU", 2.0, 0.0, 63, 118, 228, 158, 129, 77, 144, 129, 77},
    /* 40 */
    {40, "SMALL_END_ISLANDS", 0.5, 0.5, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {41, "END_MIDLANDS", 0.5, 0.5, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {42, "END_HIGHLANDS", 0.5, 0.5, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {43, "END_BARRENS", 0.5, 0.5, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {44, "WARM_OCEAN", 0.5, 0.5, 67, 213, 238, 255, 255, 255, 255, 255, 255},
    /* 45 */
    {45, "LUKEWARM_OCEAN", 0.5, 0.5, 69, 173, 242, 255, 255, 255, 255, 255, 255},
    {46, "COLD_OCEAN", 0.5, 0.5, 61, 87, 214, 255, 255, 255, 255, 255, 255},
    {47, "DEEP_WARM_OCEAN", 0.5, 0.5, 67, 213, 238, 255, 255, 255, 255, 255, 255},
    {48, "DEEP_LUKEWARM_OCEAN", 0.5, 0.5, 69, 173, 242, 255, 255, 255, 255, 255, 255},
    {49, "DEEP_COLD_OCEAN", 0.5, 0.5, 61, 87, 214, 255, 255, 255, 255, 255, 255},
    /* 50 */
    {50, "DEEP_FROZEN_OCEAN", 0.5, 0.5, 57, 56, 201, 255, 255, 255, 255, 255, 255},
    {51, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {52, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {53, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {54, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    /* 55 */
    {55, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {56, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {57, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {58, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {59, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    /* 60 */
    {60, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {61, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {62, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {63, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {64, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    /* 65 */
    {65, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {66, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {67, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {68, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {69, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    /* 70 */
    {70, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {71, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {72, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {73, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {74, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    /* 75 */
    {75, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {76, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {77, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {78, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {79, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    /* 80 */
    {80, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {81, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {82, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {83, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {84, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    /* 85 */
    {85, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {86, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {87, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {88, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {89, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    /* 90 */
    {90, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {91, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {92, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {93, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {94, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    /* 95 */
    {95, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {96, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {97, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {98, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {99, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    /* 100 */
    {100, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {101, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {102, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {103, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {104, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    /* 105 */
    {105, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {106, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {107, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {108, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {109, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    /* 110 */
    {110, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {111, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {112, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {113, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {114, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    /* 115 */
    {115, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {116, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {117, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {118, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {119, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    /* 120 */
    {120, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {121, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {122, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {123, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {124, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    /* 125 */
    {125, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {126, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {127, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {128, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {129, "SUNFLOWER_PLAINS", 0.8, 0.4, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    /* 130 */
    {130, "DESERT_LAKES", 2.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {131, "GRAVELLY_MOUNTAINS", 0.2, 0.3, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {132, "FLOWER_FOREST", 0.7, 0.8, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {133, "TAIGA_MOUNTAINS", 0.25, 0.8, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {134, "SWAMP_HILLS", 0.8, 0.9, 97, 123, 100, 106, 112, 57, 106, 112, 57},
    /* 135 */
    {135, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {136, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {137, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {138, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {139, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    /* 140 */
    {140, "ICE_SPIKES", 0.0, 0.5, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {141, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {142, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {143, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {144, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    /* 145 */
    {145, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {146, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {147, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {148, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {149, "MODIFIED_JUNGLE", 0.95, 0.9, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    /* 150 */
    {150, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {151, "MODIFIED_JUNGLE_EDGE", 0.95, 0.8, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {152, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {153, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {154, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    /* 155 */
    {155, "TALL_BIRCH_FOREST", 0.6, 0.6, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {156, "TALL_BIRCH_HILLS", 0.6, 0.6, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {157, "DARK_FOREST_HILLS", 0.7, 0.8, 63, 118, 228, 255, 255, 255, 80, 122, 50},
    {158, "SNOWY_TAIGA_MOUNTAINS", 0.5, 0.4, 61, 87, 214, 255, 255, 255, 255, 255, 255},
    {159, "", 0.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    /* 160 */
    {160, "GIANT_SPRUCE_TAIGA", 0.25, 0.8, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {161, "GIANT_SPRUCE_TAIGA_HILLS", 0.25, 0.8, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {162, "MODIFIED_GRAVELLY_MOUNTAINS", 0.2, 0.3, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {163, "SHATTERED_SAVANNA", 1.225, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {164, "SHATTERED_SAVANNA_PLATEAU", 1.2125001, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    /* 165 */
    {165, "ERODED_BADLANDS", 2.0, 0.0, 63, 118, 228, 158, 129, 77, 144, 129, 77},
    {166, "MODIFIED_WOODED_BADLANDS_PLATEAU", 2.0, 0.0, 63, 118, 228, 158, 129, 77, 144, 129, 77},
    {167, "MODIFIED_BADLANDS_PLATEAU", 2.0, 0.0, 63, 118, 228, 158, 129, 77, 144, 129, 77},
    {168, "BAMBOO_JUNGLE", 0.95, 0.9, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {169, "BAMBOO_JUNGLE_HILLS", 0.95, 0.9, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    /* 170 */
    {170, "SOUL_SAND_VALLEY", 2.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {171, "CRIMSON_FOREST", 2.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {172, "WARPED_FOREST", 2.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
    {173, "BASALT_DELTAS", 2.0, 0.0, 63, 118, 228, 255, 255, 255, 255, 255, 255},
};

#define NUM_BIOMES (sizeof(biome_table) / sizeof(Biome))
