/*
 * This file is part of the Minecraft Overviewer.
 *
 * Minecraft Overviewer is free software: you can redistribute it and/or
 * modify it under the terms of the GNU General Public License as published
 * by the Free Software Foundation, either version 3 of the License, or (at
 * your option) any later version.
 *
 * Minecraft Overviewer is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General
 * Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along
 * with the Overviewer.  If not, see <http://www.gnu.org/licenses/>.
 */

#include <stdint.h>
#include <stdbool.h>

#define DEFAULT_BIOME 4 /* forest, nice and green */

typedef struct {
    const char* name;
    const float temperature;
    const float rainfall;

    const uint32_t wr, wg, wb; // Force or not ? water Color
    const uint32_t fr, fg, fb; // Force Foliage Color
    const uint32_t gr, gg, gb; // Force Grass Color
} Biome;

/* each entry in this table is yanked *directly* out of the minecraft source
 * temp/rainfall are taken from what MCP calls setTemperatureRainfall
 *
 * Some biomes, like Swamp, do a bit of post-processing by multiplying on a
 * hard-coded color. The RGB tuple used follows the temp/rainfall.
 * 255, 255, 255 is white, which means do nothing
 * the 3 last int is for water color!
 *
 * keep in mind the x/y coordinate in the color tables is found *after*
 * multiplying rainfall and temperature for the second coordinate, *and* the
 * origin is in the lower-right. <3 biomes.
 */
static Biome biome_table[] = {
    /* FLAG BIOMES IDS */
{"ocean", 0.5, 0.5, 63, 118, 228, 255, 255, 255, 142, 185, 113},
{"plains", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"desert", 2.0, 0.0, 63, 118, 228, 174, 164, 42, 191, 183, 85},
{"mountains", 0.2, 0.3, 63, 118, 228, 109, 163, 107, 138, 182, 137},
{"forest", 0.7, 0.8, 63, 118, 228, 89, 174, 48, 121, 192, 90},
{"taiga", 0.25, 0.8, 63, 118, 228, 104, 164, 100, 134, 183, 131},
{"swamp", 0.8, 0.9, 97, 123, 100, 106, 112, 57, 106, 112, 57},
{"river", 0.5, 0.5, 63, 118, 228, 113, 167, 77, 142, 185, 113},
{"nether_wastes", 2.0, 0.0, 63, 118, 228, 174, 164, 42, 191, 183, 85},
{"the_end", 0.5, 0.5, 63, 118, 228, 113, 167, 77, 142, 185, 113},
{"frozen_ocean", 0.0, 0.5, 57, 56, 201, 96, 161, 123, 128, 180, 151},
{"frozen_river", 0.0, 0.5, 57, 56, 201, 96, 161, 123, 128, 180, 151},
{"snowy_tundra", 0.0, 0.5, 63, 118, 228, 96, 161, 123, 128, 180, 151},
{"snowy_mountains", 0.0, 0.5, 63, 118, 228, 96, 161, 123, 128, 180, 151},
{"mushroom_fields", 0.9, 1.0, 63, 118, 228, 43, 187, 15, 85, 201, 63},
{"mushroom_field_shore", 0.9, 1.1, 63, 118, 228, 43, 187, 15, 85, 201, 63},
{"beach", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"desert_hills", 2.0, 0.0, 63, 118, 228, 174, 164, 42, 191, 183, 85},
{"wooded_hills", 0.7, 0.8, 63, 118, 228, 89, 174, 48, 121, 192, 90},
{"taiga_hills", 0.25, 0.8, 63, 118, 228, 104, 164, 100, 134, 183, 131},
{"mountain_edge", 0.2, 0.3, 63, 118, 228, 109, 163, 107, 138, 182, 137},
{"jungle", 0.95, 0.9, 63, 118, 228, 48, 187, 11, 89, 201, 60},
{"jungle_hills", 0.95, 0.9, 63, 118, 228, 48, 187, 11, 89, 201, 60},
{"jungle_edge", 0.95, 0.9, 63, 118, 228, 62, 184, 15, 100, 199, 63},
{"deep_ocean", 0.5, 0.5, 67, 213, 238, 113, 167, 77, 142, 185, 113},
{"stone_shore", 0.2, 0.3, 63, 118, 228, 109, 163, 107, 138, 182, 137},
{"snowy_beach", 0.05, 0.3, 63, 118, 228, 100, 162, 120, 131, 181, 147},
{"birch_forest", 0.6, 0.6, 63, 118, 228, 107, 169, 65, 136, 187, 103},
{"birch_forest_hills", 0.6, 0.6, 63, 118, 228, 107, 169, 65, 136, 187, 103},
{"dark_forest", 0.7, 0.8, 63, 118, 228, 89, 174, 48, 80, 122, 50},
{"snowy_taiga", 0.5, 0.4, 61, 87, 214, 96, 161, 123, 128, 180, 151},
{"snowy_taiga_hills", 0.5, 0.4, 61, 87, 214, 96, 161, 123, 128, 180, 151},
{"giant_tree_taiga", 0.3, 0.8, 63, 118, 228, 104, 165, 95, 134, 184, 127},
{"giant_tree_taiga_hills", 0.3, 0.8, 63, 118, 104, 165, 95, 100, 134, 184, 127},
{"wooded_mountains", 0.2, 0.3, 63, 118, 228, 109, 163, 107, 138, 182, 137},
{"savanna", 1.2, 0.0, 63, 118, 228, 174, 164, 42, 191, 183, 85},
{"savanna_plateau", 1.0, 0.0, 63, 118, 228, 174, 164, 42, 191, 183, 85},
{"badlands", 2.0, 0.0, 63, 118, 228, 158, 129, 77, 144, 129, 77},
{"wooded_badlands_plateau", 2.0, 0.0, 63, 118, 228, 158, 129, 77, 144, 129, 77},
{"badlands_plateau", 2.0, 0.0, 63, 118, 228, 158, 129, 77, 144, 129, 77},
{"small_end_islands", 0.5, 0.5, 63, 118, 228, 113, 167, 77, 142, 185, 113},
{"end_midlands", 0.5, 0.5, 63, 118, 228, 113, 167, 77, 142, 185, 113},
{"end_highlands", 0.5, 0.5, 63, 118, 228, 113, 167, 77, 142, 185, 113},
{"end_barrens", 0.5, 0.5, 63, 118, 228, 113, 167, 77, 142, 185, 113},
{"warm_ocean", 0.5, 0.5, 67, 213, 238, 113, 167, 77, 142, 185, 113},
{"lukewarm_ocean", 0.5, 0.5, 69, 173, 242, 113, 167, 77, 142, 185, 113},
{"cold_ocean", 0.5, 0.5, 61, 87, 214, 113, 167, 77, 142, 185, 113},
{"deep_warm_ocean", 0.5, 0.5, 67, 213, 238, 113, 167, 77, 142, 185, 113},
{"deep_lukewarm_ocean", 0.5, 0.5, 69, 173, 242, 113, 167, 77, 142, 185, 113},
{"deep_cold_ocean", 0.5, 0.5, 61, 87, 214, 113, 167, 77, 142, 185, 113},
{"deep_frozen_ocean", 0.5, 0.5, 57, 56, 201, 113, 167, 77, 142, 185, 113},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"the_void", 0.0, 0.0, 63, 118, 228, 113, 167, 77, 142, 185, 113},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"sunflower_plains", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"desert_lakes", 2.0, 0.0, 63, 118, 228, 174, 164, 42, 191, 183, 85},
{"gravelly_mountains", 0.2, 0.3, 63, 118, 228, 109, 163, 107, 138, 182, 137},
{"flower_forest", 0.7, 0.8, 63, 118, 228, 89, 174, 48, 121, 192, 90},
{"taiga_mountains", 0.25, 0.8, 63, 118, 228, 104, 164, 100, 134, 183, 131},
{"swamp_hills", 0.8, 0.9, 97, 123, 100, 106, 112, 57, 106, 112, 57},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"ice_spikes", 0.0, 0.5, 63, 118, 228, 96, 161, 123, 128, 180, 151},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"modified_jungle", 0.95, 0.9, 63, 118, 228, 48, 187, 11, 89, 201, 60},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"modified_jungle_edge", 0.95, 0.8, 63, 118, 228, 62, 184, 15, 100, 199, 63},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"tall_birch_forest", 0.6, 0.6, 63, 118, 228, 107, 169, 65, 136, 187, 103},
{"tall_birch_hills", 0.6, 0.6, 63, 118, 228, 107, 169, 65, 136, 187, 103},
{"dark_forest_hills", 0.7, 0.8, 63, 118, 228, 89, 174, 48, 80, 122, 50},
{"snowy_taiga_mountains", 0.5, 0.4, 61, 87, 214, 96, 161, 123, 128, 180, 151},
{"", 0.8, 0.4, 63, 118, 228, 119, 171, 47, 145, 189, 89},
{"giant_spruce_taiga", 0.25, 0.8, 63, 118, 228, 104, 164, 100, 134, 183, 131},
{"giant_spruce_taiga_hills", 0.25, 0.8, 63, 118, 228, 104, 164, 100, 134, 183, 131},
{"modified_gravelly_mountains", 0.2, 0.3, 63, 118, 228, 109, 163, 107, 138, 182, 137},
{"shattered_savanna", 1.225, 0.0, 63, 118, 228, 174, 164, 42, 191, 183, 85},
{"shattered_savanna_plateau", 1.2125001, 0.0, 63, 118, 228, 174, 164, 42, 191, 183, 85},
{"eroded_badlands", 2.0, 0.0, 63, 118, 228, 158, 129, 77, 144, 129, 77},
{"modified_wooded_badlands_plateau", 2.0, 0.0, 63, 118, 228, 158, 129, 77, 144, 129, 77},
{"modified_badlands_plateau", 2.0, 0.0, 63, 118, 228, 158, 129, 77, 144, 129, 77},
{"bamboo_jungle", 0.95, 0.9, 63, 118, 228, 48, 187, 11, 89, 201, 60},
{"bamboo_jungle_hills", 0.95, 0.9, 63, 118, 48, 187, 11, 255, 89, 201, 60},
{"soul_sand_valley", 2.0, 0.0, 63, 118, 228, 174, 164, 42, 191, 183, 85},
{"crimson_forest", 2.0, 0.0, 63, 118, 228, 174, 164, 42, 191, 183, 85},
{"warped_forest", 2.0, 0.0, 63, 118, 228, 174, 164, 42, 191, 183, 85},
{"basalt_deltas", 2.0, 0.0, 63, 118, 228, 174, 164, 42, 191, 183, 85}
    /* END FLAG BIOMES IDS */
};

#define NUM_BIOMES (sizeof(biome_table) / sizeof(Biome))
